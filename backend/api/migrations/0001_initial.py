# Generated by Django 5.2.8 on 2025-11-12 19:22

import django.core.validators
import django.db.models.deletion
import uuid
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='Campus',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('title', models.CharField(max_length=255)),
                ('address', models.CharField(blank=True, max_length=255)),
                ('city', models.CharField(blank=True, max_length=128)),
                ('geo_lat', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True)),
                ('geo_lon', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'ordering': ['title'],
            },
        ),
        migrations.CreateModel(
            name='CampusEvent',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.CharField(max_length=100, primary_key=True, serialize=False)),
                ('title', models.CharField(max_length=255)),
                ('subtitle', models.CharField(blank=True, max_length=255)),
                ('description', models.TextField(blank=True)),
                ('category', models.CharField(choices=[('culture', 'Culture'), ('sport', 'Sport'), ('community', 'Community'), ('education', 'Education'), ('career', 'Career'), ('other', 'Other')], default='other', max_length=64)),
                ('starts_at', models.DateTimeField()),
                ('ends_at', models.DateTimeField(blank=True, null=True)),
                ('location', models.JSONField(blank=True, default=dict)),
                ('organizer', models.JSONField(blank=True, default=dict)),
                ('cover', models.JSONField(blank=True, default=dict)),
                ('capacity', models.PositiveIntegerField(blank=True, null=True)),
                ('remaining', models.PositiveIntegerField(blank=True, null=True)),
                ('registration_required', models.BooleanField(default=True)),
                ('registration_deadline', models.DateTimeField(blank=True, null=True)),
                ('visibility', models.CharField(choices=[('public', 'Public'), ('students_only', 'Students only'), ('staff_only', 'Staff only'), ('invite_only', 'Invite only')], default='public', max_length=32)),
                ('tags', models.JSONField(blank=True, default=list)),
                ('agenda', models.JSONField(blank=True, default=list)),
                ('links', models.JSONField(blank=True, default=dict)),
                ('status', models.CharField(choices=[('scheduled', 'Scheduled'), ('canceled', 'Canceled'), ('completed', 'Completed')], default='scheduled', max_length=32)),
                ('meta', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'ordering': ['starts_at'],
            },
        ),
        migrations.CreateModel(
            name='CareerCompany',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.CharField(max_length=100, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=255)),
                ('verified_partner', models.BooleanField(default=False)),
                ('logo_url', models.URLField(blank=True)),
                ('site_url', models.URLField(blank=True)),
                ('description', models.TextField(blank=True)),
                ('contacts', models.JSONField(blank=True, default=dict)),
                ('metadata', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='Department',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.CharField(max_length=100, primary_key=True, serialize=False)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField(blank=True)),
            ],
            options={
                'ordering': ['title'],
            },
        ),
        migrations.CreateModel(
            name='DormPaymentIntent',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('residence', models.CharField(blank=True, max_length=128)),
                ('period', models.CharField(blank=True, max_length=32)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=12)),
                ('currency', models.CharField(default='RUB', max_length=8)),
                ('status', models.CharField(choices=[('requires_action', 'Requires action'), ('processing', 'Processing'), ('succeeded', 'Succeeded'), ('canceled', 'Canceled')], default='requires_action', max_length=32)),
                ('confirmation_url', models.URLField(blank=True)),
                ('purpose', models.CharField(default='dorm_fee', max_length=128)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('provider_payload', models.JSONField(blank=True, default=dict)),
                ('idempotency_key', models.CharField(blank=True, max_length=64)),
                ('request_id', models.CharField(blank=True, max_length=64)),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='DormService',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.CharField(max_length=100, primary_key=True, serialize=False)),
                ('title', models.CharField(max_length=255)),
                ('category', models.CharField(blank=True, max_length=128)),
                ('description', models.TextField(blank=True)),
                ('price_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('price_currency', models.CharField(default='RUB', max_length=8)),
                ('delivery_time', models.CharField(blank=True, max_length=128)),
                ('availability', models.JSONField(blank=True, default=dict)),
                ('options', models.JSONField(blank=True, default=list)),
                ('required_fields', models.JSONField(blank=True, default=list)),
                ('metadata', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'ordering': ['title'],
            },
        ),
        migrations.CreateModel(
            name='Faculty',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.CharField(max_length=100, primary_key=True, serialize=False)),
                ('title', models.CharField(max_length=255)),
                ('short_title', models.CharField(blank=True, max_length=128)),
                ('description', models.TextField(blank=True)),
                ('programs_count', models.PositiveIntegerField(blank=True, null=True)),
            ],
            options={
                'ordering': ['title'],
            },
        ),
        migrations.CreateModel(
            name='LibraryCatalogItem',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.CharField(max_length=100, primary_key=True, serialize=False)),
                ('title', models.CharField(max_length=255)),
                ('subtitle', models.CharField(blank=True, max_length=255)),
                ('authors', models.JSONField(blank=True, default=list)),
                ('publisher', models.CharField(blank=True, max_length=255)),
                ('published_year', models.PositiveIntegerField(blank=True, null=True)),
                ('isbn', models.CharField(blank=True, max_length=32)),
                ('doi', models.CharField(blank=True, max_length=64)),
                ('language', models.CharField(blank=True, max_length=32)),
                ('media_type', models.CharField(choices=[('book', 'Book'), ('magazine', 'Magazine'), ('ebook', 'E-book'), ('audiobook', 'Audio'), ('video', 'Video')], default='book', max_length=32)),
                ('categories', models.JSONField(blank=True, default=list)),
                ('tags', models.JSONField(blank=True, default=list)),
                ('description', models.TextField(blank=True)),
                ('cover_url', models.URLField(blank=True)),
                ('formats', models.JSONField(blank=True, default=list)),
                ('availability', models.JSONField(blank=True, default=dict)),
                ('rating', models.JSONField(blank=True, default=dict)),
                ('meta', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'ordering': ['title'],
            },
        ),
        migrations.CreateModel(
            name='PaymentProviderWebhook',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('intent_id', models.CharField(blank=True, max_length=128)),
                ('event_type', models.CharField(max_length=64)),
                ('payload', models.JSONField()),
                ('received_at', models.DateTimeField(auto_now_add=True)),
                ('processed_at', models.DateTimeField(blank=True, null=True)),
                ('status', models.CharField(default='pending', max_length=32)),
                ('metadata', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'ordering': ['-received_at'],
            },
        ),
        migrations.CreateModel(
            name='TuitionInvoice',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('term', models.CharField(max_length=32)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=12)),
                ('currency', models.CharField(default='RUB', max_length=8)),
                ('due_date', models.DateField()),
                ('description', models.CharField(blank=True, max_length=255)),
                ('status', models.CharField(default='pending', max_length=32)),
                ('paid_at', models.DateTimeField(blank=True, null=True)),
                ('payment_method', models.CharField(blank=True, max_length=64)),
                ('metadata', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'ordering': ['due_date'],
            },
        ),
        migrations.CreateModel(
            name='University',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.CharField(max_length=100, primary_key=True, serialize=False)),
                ('title', models.CharField(max_length=255)),
                ('short_title', models.CharField(blank=True, max_length=128)),
                ('city', models.CharField(max_length=128)),
                ('region', models.CharField(blank=True, max_length=128)),
                ('description', models.TextField(blank=True)),
                ('contact_phone', models.CharField(blank=True, max_length=64)),
                ('contact_email', models.EmailField(blank=True, max_length=254)),
                ('contact_site', models.URLField(blank=True)),
                ('contact_address', models.CharField(blank=True, max_length=255)),
                ('media_logo_url', models.URLField(blank=True)),
                ('media_image_url', models.URLField(blank=True)),
                ('stats_students_total', models.PositiveIntegerField(blank=True, null=True)),
                ('stats_programs_count', models.PositiveIntegerField(blank=True, null=True)),
                ('stats_budget_quota', models.PositiveIntegerField(blank=True, null=True)),
                ('stats_employment_rate', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('feature_has_dormitory', models.BooleanField(default=False)),
                ('feature_has_military_department', models.BooleanField(default=False)),
                ('feature_has_open_day', models.BooleanField(default=False)),
                ('feature_has_preparatory_courses', models.BooleanField(default=False)),
                ('feature_has_distance_programs', models.BooleanField(default=False)),
                ('last_updated', models.DateTimeField(blank=True, null=True)),
                ('data_source', models.CharField(blank=True, max_length=128)),
                ('language', models.CharField(blank=True, max_length=32)),
                ('extra', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'ordering': ['title'],
            },
        ),
        migrations.CreateModel(
            name='AccessControlEvent',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('device_id', models.CharField(max_length=64)),
                ('subject_id', models.CharField(max_length=128)),
                ('direction', models.CharField(max_length=16)),
                ('occurred_at', models.DateTimeField()),
                ('payload', models.JSONField(blank=True, default=dict)),
                ('processed', models.BooleanField(default=False)),
                ('processed_at', models.DateTimeField(blank=True, null=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'ordering': ['-occurred_at'],
                'indexes': [models.Index(fields=['subject_id'], name='api_accessc_subject_971a6e_idx'), models.Index(fields=['device_id'], name='api_accessc_device__fcf923_idx')],
            },
        ),
        migrations.CreateModel(
            name='CareerVacancy',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.CharField(max_length=100, primary_key=True, serialize=False)),
                ('title', models.CharField(max_length=255)),
                ('direction', models.JSONField(blank=True, default=list)),
                ('grade', models.CharField(blank=True, max_length=64)),
                ('employment', models.CharField(blank=True, max_length=64)),
                ('location', models.JSONField(blank=True, default=dict)),
                ('visa_sponsorship', models.BooleanField(default=False)),
                ('relocation', models.BooleanField(default=False)),
                ('salary', models.JSONField(blank=True, default=dict)),
                ('requirements', models.JSONField(blank=True, default=dict)),
                ('responsibilities', models.JSONField(blank=True, default=list)),
                ('benefits', models.JSONField(blank=True, default=list)),
                ('skills', models.JSONField(blank=True, default=list)),
                ('experience_min_years', models.PositiveIntegerField(blank=True, null=True)),
                ('language_requirements', models.JSONField(blank=True, default=dict)),
                ('apply_window', models.JSONField(blank=True, default=dict)),
                ('apply', models.JSONField(blank=True, default=dict)),
                ('source', models.JSONField(blank=True, default=dict)),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('pending_review', 'Pending review'), ('published', 'Published'), ('archived', 'Archived'), ('expired', 'Expired')], default='published', max_length=32)),
                ('posted_at', models.DateTimeField()),
                ('published_until', models.DateTimeField(blank=True, null=True)),
                ('updated_at_remote', models.DateTimeField(blank=True, null=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('company', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='vacancies', to='api.careercompany')),
            ],
            options={
                'ordering': ['-posted_at'],
            },
        ),
        migrations.CreateModel(
            name='Classroom',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=64)),
                ('building', models.CharField(blank=True, max_length=128)),
                ('address', models.CharField(blank=True, max_length=255)),
                ('capacity', models.PositiveIntegerField(blank=True, null=True)),
                ('equipment', models.JSONField(blank=True, default=list)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('campus', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='classrooms', to='api.campus')),
            ],
            options={
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='DashboardSnapshot',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('slug', models.CharField(max_length=64)),
                ('date', models.DateField()),
                ('scope', models.JSONField(blank=True, default=dict)),
                ('data', models.JSONField(default=dict)),
                ('generated_at', models.DateTimeField(auto_now_add=True)),
                ('source', models.CharField(blank=True, max_length=128)),
                ('meta', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'ordering': ['-date'],
                'unique_together': {('slug', 'date')},
            },
        ),
        migrations.CreateModel(
            name='AcademicCourse',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.CharField(max_length=100, primary_key=True, serialize=False)),
                ('kind', models.CharField(choices=[('core', 'Core'), ('elective', 'Elective'), ('digital_faculty', 'Digital faculty')], default='core', max_length=32)),
                ('title', models.CharField(max_length=255)),
                ('short_title', models.CharField(blank=True, max_length=128)),
                ('term', models.CharField(blank=True, max_length=32)),
                ('format', models.CharField(blank=True, choices=[('online', 'Online'), ('offline', 'Offline'), ('hybrid', 'Hybrid')], max_length=32)),
                ('language', models.CharField(blank=True, max_length=32)),
                ('ects', models.DecimalField(blank=True, decimal_places=1, max_digits=4, null=True, validators=[django.core.validators.MinValueValidator(0)])),
                ('workload_hours', models.PositiveIntegerField(blank=True, null=True)),
                ('digital_faculty', models.BooleanField(default=False)),
                ('description', models.TextField(blank=True)),
                ('schedule_preview', models.JSONField(blank=True, default=list)),
                ('quota', models.JSONField(blank=True, default=dict)),
                ('enroll_window', models.JSONField(blank=True, default=dict)),
                ('prerequisites', models.JSONField(blank=True, default=list)),
                ('anti_conflicts', models.JSONField(blank=True, default=dict)),
                ('rating', models.JSONField(blank=True, default=dict)),
                ('links', models.JSONField(blank=True, default=dict)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('department', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='courses', to='api.department')),
            ],
            options={
                'ordering': ['title'],
            },
        ),
        migrations.AddField(
            model_name='department',
            name='faculty',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='departments', to='api.faculty'),
        ),
        migrations.CreateModel(
            name='IdempotencyKeyRecord',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('key', models.CharField(max_length=128, unique=True)),
                ('scope', models.CharField(blank=True, max_length=128)),
                ('request_hash', models.CharField(blank=True, max_length=128)),
                ('response_payload', models.JSONField(blank=True, default=dict)),
                ('status_code', models.PositiveSmallIntegerField(blank=True, null=True)),
                ('expires_at', models.DateTimeField()),
                ('metadata', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'indexes': [models.Index(fields=['expires_at'], name='api_idempot_expires_cbbac8_idx')],
            },
        ),
        migrations.CreateModel(
            name='NewsMention',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('query', models.CharField(max_length=255)),
                ('source', models.CharField(max_length=128)),
                ('title', models.CharField(max_length=255)),
                ('url', models.URLField()),
                ('excerpt', models.TextField(blank=True)),
                ('published_at', models.DateTimeField()),
                ('tonality', models.CharField(blank=True, max_length=32)),
                ('reach', models.JSONField(blank=True, default=dict)),
                ('metadata', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'ordering': ['-published_at'],
                'indexes': [models.Index(fields=['source'], name='api_newsmen_source_909505_idx'), models.Index(fields=['published_at'], name='api_newsmen_publish_c4b74c_idx')],
            },
        ),
        migrations.CreateModel(
            name='Program',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.CharField(max_length=100, primary_key=True, serialize=False)),
                ('title', models.CharField(max_length=255)),
                ('level', models.CharField(choices=[('bachelor', 'Bachelor'), ('master', 'Master'), ('specialist', 'Specialist'), ('phd', 'PhD')], max_length=32)),
                ('format', models.CharField(choices=[('full_time', 'Full time'), ('part_time', 'Part time'), ('distance', 'Distance')], max_length=32)),
                ('duration_years', models.PositiveSmallIntegerField(validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(10)])),
                ('language', models.CharField(blank=True, max_length=32)),
                ('tuition_per_year', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('tuition_currency', models.CharField(default='RUB', max_length=8)),
                ('tuition_note', models.CharField(blank=True, max_length=255)),
                ('has_budget', models.BooleanField(default=False)),
                ('budget_places', models.PositiveIntegerField(blank=True, null=True)),
                ('paid_places', models.PositiveIntegerField(blank=True, null=True)),
                ('targeted_places', models.PositiveIntegerField(blank=True, null=True)),
                ('passing_score_last_year', models.PositiveIntegerField(blank=True, null=True)),
                ('passing_score_median', models.PositiveIntegerField(blank=True, null=True)),
                ('passing_score_year', models.PositiveIntegerField(blank=True, null=True)),
                ('admission_deadline', models.DateField(blank=True, null=True)),
                ('description', models.TextField(blank=True)),
                ('outcomes', models.JSONField(blank=True, default=list)),
                ('career_paths', models.JSONField(blank=True, default=list)),
                ('links', models.JSONField(blank=True, default=dict)),
                ('media', models.JSONField(blank=True, default=dict)),
                ('meta', models.JSONField(blank=True, default=dict)),
                ('department', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='programs', to='api.department')),
                ('university', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='programs', to='api.university')),
            ],
            options={
                'ordering': ['title'],
            },
        ),
        migrations.CreateModel(
            name='AcademicGroup',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.CharField(max_length=100, primary_key=True, serialize=False)),
                ('title', models.CharField(max_length=128)),
                ('education_level', models.CharField(blank=True, choices=[('bachelor', 'Bachelor'), ('master', 'Master'), ('specialist', 'Specialist'), ('phd', 'PhD')], max_length=32)),
                ('start_year', models.PositiveIntegerField(blank=True, null=True)),
                ('curator_id', models.CharField(blank=True, max_length=64)),
                ('schedule_time_zone', models.CharField(default='Europe/Moscow', max_length=64)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('faculty', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='academic_groups', to='api.faculty')),
                ('program', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='academic_groups', to='api.program')),
                ('university', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='academic_groups', to='api.university')),
            ],
            options={
                'ordering': ['title'],
            },
        ),
        migrations.CreateModel(
            name='ProgramAdmissionStage',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('stage', models.CharField(max_length=128)),
                ('status', models.CharField(choices=[('open', 'Open'), ('scheduled', 'Scheduled'), ('closed', 'Closed')], max_length=32)),
                ('date', models.DateField(blank=True, null=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('program', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='admission_stages', to='api.program')),
            ],
            options={
                'ordering': ['program', 'date', 'stage'],
            },
        ),
        migrations.CreateModel(
            name='ProgramCurriculum',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('semesters', models.PositiveSmallIntegerField(validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(20)])),
                ('core_modules', models.JSONField(blank=True, default=list)),
                ('practice', models.JSONField(blank=True, default=dict)),
                ('electives', models.JSONField(blank=True, default=list)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('program', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='curriculum', to='api.program')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='ProgramDeadline',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('phase', models.CharField(max_length=64)),
                ('date', models.DateField()),
                ('description', models.CharField(blank=True, max_length=255)),
                ('program', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='deadlines', to='api.program')),
            ],
            options={
                'ordering': ['date'],
            },
        ),
        migrations.CreateModel(
            name='ProgramExam',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('exam_type', models.CharField(max_length=32)),
                ('subject', models.CharField(max_length=255)),
                ('min_score', models.PositiveIntegerField(validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(400)])),
                ('weight', models.DecimalField(blank=True, decimal_places=2, max_digits=4, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(1)])),
                ('priority', models.PositiveSmallIntegerField(blank=True, null=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('program', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='exams', to='api.program')),
            ],
            options={
                'ordering': ['program', 'priority', 'subject'],
            },
        ),
        migrations.CreateModel(
            name='ProgramFAQ',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('question', models.CharField(max_length=255)),
                ('answer', models.TextField()),
                ('program', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='faq', to='api.program')),
            ],
            options={
                'ordering': ['program', 'question'],
            },
        ),
        migrations.CreateModel(
            name='ProgramRequirement',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('year', models.PositiveIntegerField()),
                ('regulation_url', models.URLField(blank=True)),
                ('exams', models.JSONField(blank=True, default=list)),
                ('additional_tests', models.JSONField(blank=True, default=list)),
                ('thresholds', models.JSONField(blank=True, default=dict)),
                ('tuition', models.JSONField(blank=True, default=dict)),
                ('deadlines', models.JSONField(blank=True, default=dict)),
                ('benefits', models.JSONField(blank=True, default=dict)),
                ('documents', models.JSONField(blank=True, default=list)),
                ('language_requirements', models.JSONField(blank=True, default=list)),
                ('international', models.JSONField(blank=True, default=dict)),
                ('application', models.JSONField(blank=True, default=dict)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('program', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='requirements', to='api.program')),
            ],
            options={
                'ordering': ['-year'],
            },
        ),
        migrations.CreateModel(
            name='ProgramScholarship',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=255)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=12, validators=[django.core.validators.MinValueValidator(0)])),
                ('currency', models.CharField(default='RUB', max_length=8)),
                ('description', models.CharField(blank=True, max_length=255)),
                ('program', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='scholarships', to='api.program')),
            ],
            options={
                'ordering': ['program', 'name'],
            },
        ),
        migrations.CreateModel(
            name='Project',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('code', models.CharField(max_length=32, unique=True)),
                ('owner_type', models.CharField(choices=[('student', 'Student'), ('staff', 'Staff'), ('department', 'Department')], max_length=32)),
                ('title', models.CharField(max_length=255)),
                ('summary', models.CharField(max_length=300)),
                ('description_md', models.TextField()),
                ('domain_tags', models.JSONField(blank=True, default=list)),
                ('skills_required', models.JSONField(blank=True, default=list)),
                ('format', models.CharField(blank=True, choices=[('intra_university', 'Intra university'), ('external_partner', 'External partner'), ('hackathon', 'Hackathon'), ('research', 'Research')], max_length=32)),
                ('links', models.JSONField(blank=True, default=dict)),
                ('timeline', models.JSONField(blank=True, default=dict)),
                ('team', models.JSONField(blank=True, default=dict)),
                ('constraints', models.JSONField(blank=True, default=dict)),
                ('education', models.JSONField(blank=True, default=dict)),
                ('contacts', models.JSONField(blank=True, default=dict)),
                ('moderation', models.JSONField(blank=True, default=dict)),
                ('metrics', models.JSONField(blank=True, default=dict)),
                ('media', models.JSONField(blank=True, default=dict)),
                ('status', models.CharField(choices=[('pending_review', 'Pending review'), ('auto_approved', 'Auto approved'), ('approved', 'Approved'), ('rejected', 'Rejected'), ('draft', 'Draft')], default='pending_review', max_length=32)),
                ('published_at', models.DateTimeField(blank=True, null=True)),
                ('extra', models.JSONField(blank=True, default=dict)),
                ('department', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='projects', to='api.department')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ProjectTask',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('external_id', models.CharField(blank=True, max_length=128)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField(blank=True)),
                ('status', models.CharField(choices=[('todo', 'To do'), ('in_progress', 'In progress'), ('done', 'Done'), ('blocked', 'Blocked')], default='todo', max_length=32)),
                ('assignees', models.JSONField(blank=True, default=list)),
                ('labels', models.JSONField(blank=True, default=list)),
                ('due_date', models.DateField(blank=True, null=True)),
                ('tracker_payload', models.JSONField(blank=True, default=dict)),
                ('project', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='tasks', to='api.project')),
            ],
            options={
                'ordering': ['due_date', 'title'],
            },
        ),
        migrations.CreateModel(
            name='ProjectVacancy',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('role_code', models.CharField(max_length=64)),
                ('title', models.CharField(max_length=128)),
                ('description', models.TextField(blank=True)),
                ('skills', models.JSONField(blank=True, default=list)),
                ('count_total', models.PositiveSmallIntegerField(default=1)),
                ('count_open', models.PositiveSmallIntegerField(default=1)),
                ('experience_level', models.CharField(blank=True, max_length=64)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('project', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='vacancies', to='api.project')),
            ],
        ),
        migrations.CreateModel(
            name='Teacher',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.CharField(max_length=100, primary_key=True, serialize=False)),
                ('full_name', models.CharField(max_length=255)),
                ('email', models.EmailField(blank=True, max_length=254)),
                ('phone', models.CharField(blank=True, max_length=64)),
                ('position', models.CharField(blank=True, max_length=128)),
                ('bio', models.TextField(blank=True)),
                ('contacts', models.JSONField(blank=True, default=dict)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('department', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='teachers', to='api.department')),
            ],
            options={
                'ordering': ['full_name'],
            },
        ),
        migrations.CreateModel(
            name='Lesson',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.CharField(max_length=100, primary_key=True, serialize=False)),
                ('subject', models.CharField(max_length=255)),
                ('lesson_type', models.CharField(choices=[('lecture', 'Lecture'), ('seminar', 'Seminar'), ('lab', 'Lab'), ('exam', 'Exam'), ('consultation', 'Consultation'), ('other', 'Other')], max_length=32)),
                ('starts_at', models.DateTimeField()),
                ('ends_at', models.DateTimeField()),
                ('format', models.CharField(blank=True, choices=[('online', 'Online'), ('offline', 'Offline'), ('hybrid', 'Hybrid')], max_length=32)),
                ('room_snapshot', models.JSONField(blank=True, default=dict)),
                ('teacher_snapshot', models.JSONField(blank=True, default=dict)),
                ('subgroup', models.JSONField(blank=True, default=dict)),
                ('links', models.JSONField(blank=True, default=dict)),
                ('notes', models.TextField(blank=True)),
                ('status', models.CharField(choices=[('scheduled', 'Scheduled'), ('rescheduled', 'Rescheduled'), ('canceled', 'Canceled')], default='scheduled', max_length=32)),
                ('series', models.JSONField(blank=True, default=dict)),
                ('replaces', models.JSONField(blank=True, default=dict)),
                ('cancel_info', models.JSONField(blank=True, default=dict)),
                ('updated_remote_at', models.DateTimeField(blank=True, null=True)),
                ('course', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='lessons', to='api.academiccourse')),
                ('group', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='lessons', to='api.academicgroup')),
                ('room', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='lessons', to='api.classroom')),
                ('teacher', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='lessons', to='api.teacher')),
            ],
            options={
                'ordering': ['starts_at'],
            },
        ),
        migrations.AddField(
            model_name='academiccourse',
            name='teachers',
            field=models.ManyToManyField(blank=True, related_name='courses', to='api.teacher'),
        ),
        migrations.CreateModel(
            name='TrackerWebhookEvent',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('external_id', models.CharField(blank=True, max_length=128)),
                ('event_type', models.CharField(max_length=64)),
                ('payload', models.JSONField()),
                ('received_at', models.DateTimeField(auto_now_add=True)),
                ('processed_at', models.DateTimeField(blank=True, null=True)),
                ('status', models.CharField(default='pending', max_length=32)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('project', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='tracker_events', to='api.project')),
            ],
            options={
                'ordering': ['-received_at'],
            },
        ),
        migrations.CreateModel(
            name='OpenDayEvent',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.CharField(max_length=100, primary_key=True, serialize=False)),
                ('type', models.CharField(choices=[('open_day', 'Open day'), ('excursion', 'Excursion')], max_length=32)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField(blank=True)),
                ('date', models.DateField()),
                ('starts_at', models.DateTimeField()),
                ('ends_at', models.DateTimeField(blank=True, null=True)),
                ('location', models.CharField(max_length=255)),
                ('city', models.CharField(blank=True, max_length=128)),
                ('capacity', models.PositiveIntegerField(blank=True, null=True)),
                ('remaining', models.PositiveIntegerField(blank=True, null=True)),
                ('registration_open', models.BooleanField(default=True)),
                ('registration_deadline', models.DateTimeField(blank=True, null=True)),
                ('media', models.JSONField(blank=True, default=dict)),
                ('contacts', models.JSONField(blank=True, default=dict)),
                ('links', models.JSONField(blank=True, default=dict)),
                ('filters', models.JSONField(blank=True, default=dict)),
                ('programs', models.ManyToManyField(blank=True, related_name='open_day_events', to='api.program')),
                ('university', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='open_day_events', to='api.university')),
            ],
            options={
                'ordering': ['date', 'starts_at'],
            },
        ),
        migrations.AddField(
            model_name='faculty',
            name='university',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='faculties', to='api.university'),
        ),
        migrations.AddField(
            model_name='department',
            name='university',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='departments', to='api.university'),
        ),
        migrations.AddField(
            model_name='campus',
            name='university',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='campuses', to='api.university'),
        ),
        migrations.CreateModel(
            name='UserProfile',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('external_id', models.CharField(max_length=128, unique=True)),
                ('role', models.CharField(choices=[('applicant', 'Applicant'), ('student', 'Student'), ('staff', 'Staff'), ('deanery', 'Deanery'), ('career_center', 'Career Center'), ('dorm_manager', 'Dorm Manager'), ('librarian', 'Librarian'), ('supervisor', 'Supervisor'), ('admin', 'Admin')], max_length=32)),
                ('scopes', models.JSONField(blank=True, default=list)),
                ('full_name', models.CharField(blank=True, max_length=255)),
                ('email', models.EmailField(blank=True, max_length=254)),
                ('locale', models.CharField(blank=True, max_length=32)),
                ('time_zone', models.CharField(blank=True, max_length=64)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('additional_context', models.JSONField(blank=True, default=dict)),
                ('academic_group', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='members', to='api.academicgroup')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='TuitionPaymentIntent',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=12)),
                ('currency', models.CharField(default='RUB', max_length=8)),
                ('purpose', models.CharField(default='tuition', max_length=128)),
                ('status', models.CharField(choices=[('requires_action', 'Requires action'), ('processing', 'Processing'), ('succeeded', 'Succeeded'), ('canceled', 'Canceled')], default='requires_action', max_length=32)),
                ('confirmation_url', models.URLField(blank=True)),
                ('provider_payload', models.JSONField(blank=True, default=dict)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('idempotency_key', models.CharField(blank=True, max_length=64)),
                ('request_id', models.CharField(blank=True, max_length=64)),
                ('invoice', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='payment_intents', to='api.tuitioninvoice')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='tuition_payment_intents', to='api.userprofile')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddField(
            model_name='tuitioninvoice',
            name='user',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='tuition_invoices', to='api.userprofile'),
        ),
        migrations.CreateModel(
            name='TeacherFeedback',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('period', models.CharField(blank=True, max_length=32)),
                ('rating', models.PositiveSmallIntegerField(validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('comment', models.TextField(blank=True)),
                ('anonymous', models.BooleanField(default=True)),
                ('tags', models.JSONField(blank=True, default=list)),
                ('status', models.CharField(choices=[('accepted', 'Accepted'), ('pending_moderation', 'Pending moderation'), ('rejected', 'Rejected')], default='pending_moderation', max_length=32)),
                ('visibility', models.JSONField(blank=True, default=dict)),
                ('moderation', models.JSONField(blank=True, default=dict)),
                ('content_flags', models.JSONField(blank=True, default=list)),
                ('idempotency_key', models.CharField(blank=True, max_length=64)),
                ('request_id', models.CharField(blank=True, max_length=64)),
                ('course', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='feedbacks', to='api.academiccourse')),
                ('teacher', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='feedbacks', to='api.teacher')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='teacher_feedbacks', to='api.userprofile')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ProjectTeamMembership',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('role', models.CharField(choices=[('owner', 'Owner'), ('curator', 'Curator'), ('member', 'Member')], default='member', max_length=32)),
                ('role_code', models.CharField(blank=True, max_length=64)),
                ('responsibility', models.TextField(blank=True)),
                ('joined_at', models.DateField(blank=True, null=True)),
                ('left_at', models.DateField(blank=True, null=True)),
                ('allocation', models.JSONField(blank=True, default=dict)),
                ('contacts', models.JSONField(blank=True, default=dict)),
                ('project', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='team_memberships', to='api.project')),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='project_memberships', to='api.userprofile')),
            ],
        ),
        migrations.CreateModel(
            name='ProjectSubscription',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('channels', models.JSONField(blank=True, default=list)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('project', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='subscriptions', to='api.project')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='project_subscriptions', to='api.userprofile')),
            ],
        ),
        migrations.CreateModel(
            name='ProjectApplication',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('motivation', models.TextField(blank=True)),
                ('attachments', models.JSONField(blank=True, default=list)),
                ('status', models.CharField(choices=[('new', 'New'), ('under_review', 'Under review'), ('accepted', 'Accepted'), ('rejected', 'Rejected'), ('withdrawn', 'Withdrawn')], default='new', max_length=32)),
                ('cv_url', models.URLField(blank=True)),
                ('portfolio_url', models.URLField(blank=True)),
                ('consents', models.JSONField(blank=True, default=dict)),
                ('feedback', models.JSONField(blank=True, default=dict)),
                ('idempotency_key', models.CharField(blank=True, max_length=64)),
                ('request_id', models.CharField(blank=True, max_length=64)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('project', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='applications', to='api.project')),
                ('vacancy', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='applications', to='api.projectvacancy')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='project_applications', to='api.userprofile')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddField(
            model_name='project',
            name='owner_user',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='owned_projects', to='api.userprofile'),
        ),
        migrations.CreateModel(
            name='OpenDayRegistration',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('full_name', models.CharField(max_length=128)),
                ('email', models.EmailField(max_length=254)),
                ('phone', models.CharField(blank=True, max_length=32)),
                ('comment', models.CharField(blank=True, max_length=500)),
                ('status', models.CharField(choices=[('registered', 'Registered'), ('waitlisted', 'Waitlisted'), ('canceled', 'Canceled')], default='registered', max_length=32)),
                ('ticket', models.JSONField(blank=True, default=dict)),
                ('notifications', models.JSONField(blank=True, default=dict)),
                ('meta', models.JSONField(blank=True, default=dict)),
                ('idempotency_key', models.CharField(blank=True, max_length=64)),
                ('request_id', models.CharField(blank=True, max_length=64)),
                ('event', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='registrations', to='api.opendayevent')),
                ('program', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='open_day_registrations', to='api.program')),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='open_day_registrations', to='api.userprofile')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='OfficeGuestPass',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('guest_full_name', models.CharField(max_length=255)),
                ('guest_company', models.CharField(blank=True, max_length=255)),
                ('visit_date', models.DateField()),
                ('visit_time_from', models.TimeField(blank=True, null=True)),
                ('visit_time_to', models.TimeField(blank=True, null=True)),
                ('notes', models.CharField(blank=True, max_length=255)),
                ('status', models.CharField(choices=[('active', 'Active'), ('used', 'Used'), ('cancelled', 'Cancelled')], default='active', max_length=32)),
                ('qr_payload', models.JSONField(blank=True, default=dict)),
                ('security_meta', models.JSONField(blank=True, default=dict)),
                ('idempotency_key', models.CharField(blank=True, max_length=64)),
                ('request_id', models.CharField(blank=True, max_length=64)),
                ('host', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='office_guest_passes', to='api.userprofile')),
            ],
            options={
                'ordering': ['-visit_date'],
            },
        ),
        migrations.CreateModel(
            name='OfficeCertificateRequest',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('certificate_type', models.CharField(max_length=128)),
                ('purpose', models.CharField(blank=True, max_length=255)),
                ('delivery', models.JSONField(blank=True, default=dict)),
                ('status', models.CharField(choices=[('submitted', 'Submitted'), ('in_progress', 'In progress'), ('ready', 'Ready'), ('issued', 'Issued'), ('cancelled', 'Cancelled')], default='submitted', max_length=32)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('idempotency_key', models.CharField(blank=True, max_length=64)),
                ('request_id', models.CharField(blank=True, max_length=64)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='office_certificate_requests', to='api.userprofile')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='MaxBotWebhook',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('update_type', models.CharField(max_length=64)),
                ('payload', models.JSONField()),
                ('received_at', models.DateTimeField(auto_now_add=True)),
                ('processed_at', models.DateTimeField(blank=True, null=True)),
                ('status', models.CharField(default='pending', max_length=32)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='max_bot_events', to='api.userprofile')),
            ],
            options={
                'ordering': ['-received_at'],
            },
        ),
        migrations.CreateModel(
            name='LibraryLoan',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('barcode', models.CharField(blank=True, max_length=64)),
                ('issued_at', models.DateTimeField()),
                ('due_at', models.DateTimeField()),
                ('returned_at', models.DateTimeField(blank=True, null=True)),
                ('renewals', models.JSONField(blank=True, default=list)),
                ('status', models.CharField(choices=[('active', 'Active'), ('overdue', 'Overdue'), ('returned', 'Returned'), ('closed', 'Closed')], default='active', max_length=32)),
                ('fines', models.JSONField(blank=True, default=dict)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('item', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='loans', to='api.librarycatalogitem')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='library_loans', to='api.userprofile')),
            ],
            options={
                'ordering': ['due_at'],
            },
        ),
        migrations.CreateModel(
            name='LibraryHold',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('status', models.CharField(choices=[('placed', 'Placed'), ('ready_for_pickup', 'Ready for pickup'), ('collected', 'Collected'), ('expired', 'Expired'), ('cancelled', 'Cancelled')], default='placed', max_length=32)),
                ('pickup_location', models.CharField(max_length=255)),
                ('pickup_window', models.JSONField(blank=True, default=dict)),
                ('expires_at', models.DateTimeField(blank=True, null=True)),
                ('notifications', models.JSONField(blank=True, default=dict)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('idempotency_key', models.CharField(blank=True, max_length=64)),
                ('request_id', models.CharField(blank=True, max_length=64)),
                ('item', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='holds', to='api.librarycatalogitem')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='library_holds', to='api.userprofile')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='LibraryFinePaymentIntent',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10)),
                ('currency', models.CharField(default='RUB', max_length=8)),
                ('status', models.CharField(choices=[('requires_action', 'Requires action'), ('processing', 'Processing'), ('succeeded', 'Succeeded'), ('canceled', 'Canceled')], default='requires_action', max_length=32)),
                ('confirmation_url', models.URLField(blank=True)),
                ('provider_payload', models.JSONField(blank=True, default=dict)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('idempotency_key', models.CharField(blank=True, max_length=64)),
                ('request_id', models.CharField(blank=True, max_length=64)),
                ('loan', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='fine_intents', to='api.libraryloan')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='library_fine_intents', to='api.userprofile')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='LibraryEBookAccess',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('active', 'Active'), ('expired', 'Expired')], default='pending', max_length=32)),
                ('access_url', models.URLField(blank=True)),
                ('expires_at', models.DateTimeField(blank=True, null=True)),
                ('device_limit', models.PositiveSmallIntegerField(blank=True, null=True)),
                ('drm_info', models.JSONField(blank=True, default=dict)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('idempotency_key', models.CharField(blank=True, max_length=64)),
                ('request_id', models.CharField(blank=True, max_length=64)),
                ('item', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='ebook_accesses', to='api.librarycatalogitem')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='ebook_accesses', to='api.userprofile')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='HRTravelRequest',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('title', models.CharField(max_length=255)),
                ('purpose', models.TextField()),
                ('destination', models.JSONField(default=dict)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('transport', models.JSONField(blank=True, default=dict)),
                ('accommodations', models.JSONField(blank=True, default=list)),
                ('expenses_plan', models.JSONField(blank=True, default=list)),
                ('approvals', models.JSONField(blank=True, default=list)),
                ('status', models.CharField(choices=[('submitted', 'Submitted'), ('approved', 'Approved'), ('rejected', 'Rejected'), ('in_progress', 'In progress'), ('completed', 'Completed')], default='submitted', max_length=32)),
                ('documents', models.JSONField(blank=True, default=list)),
                ('audit', models.JSONField(blank=True, default=list)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('idempotency_key', models.CharField(blank=True, max_length=64)),
                ('request_id', models.CharField(blank=True, max_length=64)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='travel_requests', to='api.userprofile')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='HRLeaveRequest',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('leave_type', models.CharField(max_length=128)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('replacement', models.JSONField(blank=True, default=dict)),
                ('approvals', models.JSONField(blank=True, default=list)),
                ('status', models.CharField(choices=[('submitted', 'Submitted'), ('approved', 'Approved'), ('rejected', 'Rejected'), ('cancelled', 'Cancelled')], default='submitted', max_length=32)),
                ('notes', models.JSONField(blank=True, default=dict)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('idempotency_key', models.CharField(blank=True, max_length=64)),
                ('request_id', models.CharField(blank=True, max_length=64)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='leave_requests', to='api.userprofile')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='EventRegistration',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('status', models.CharField(choices=[('registered', 'Registered'), ('waitlisted', 'Waitlisted'), ('cancelled', 'Cancelled'), ('attended', 'Attended')], default='registered', max_length=32)),
                ('form_payload', models.JSONField(blank=True, default=dict)),
                ('ticket', models.JSONField(blank=True, default=dict)),
                ('check_ins', models.JSONField(blank=True, default=list)),
                ('notifications', models.JSONField(blank=True, default=dict)),
                ('idempotency_key', models.CharField(blank=True, max_length=64)),
                ('request_id', models.CharField(blank=True, max_length=64)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('event', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='registrations', to='api.campusevent')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='event_registrations', to='api.userprofile')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ElectiveEnrollment',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('term', models.CharField(max_length=32)),
                ('priority', models.PositiveSmallIntegerField(blank=True, null=True)),
                ('comment', models.CharField(blank=True, max_length=500)),
                ('consents', models.JSONField(blank=True, default=dict)),
                ('status', models.CharField(choices=[('enrolled', 'Enrolled'), ('waitlisted', 'Waitlisted'), ('rejected', 'Rejected'), ('pending', 'Pending'), ('canceled', 'Canceled')], default='pending', max_length=32)),
                ('waitlist_position', models.PositiveIntegerField(blank=True, null=True)),
                ('quota_snapshot', models.JSONField(blank=True, default=dict)),
                ('enroll_window_snapshot', models.JSONField(blank=True, default=dict)),
                ('cancel_policy', models.JSONField(blank=True, default=dict)),
                ('conflicts', models.JSONField(blank=True, default=list)),
                ('notifications', models.JSONField(blank=True, default=dict)),
                ('links', models.JSONField(blank=True, default=dict)),
                ('timestamps', models.JSONField(blank=True, default=dict)),
                ('idempotency_key', models.CharField(blank=True, max_length=64)),
                ('request_id', models.CharField(blank=True, max_length=64)),
                ('course', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='elective_enrollments', to='api.academiccourse')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='elective_enrollments', to='api.userprofile')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='DormSupportTicket',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('category', models.CharField(max_length=128)),
                ('subject', models.CharField(max_length=255)),
                ('description', models.TextField()),
                ('attachments', models.JSONField(blank=True, default=list)),
                ('status', models.CharField(choices=[('open', 'Open'), ('in_progress', 'In progress'), ('resolved', 'Resolved'), ('closed', 'Closed')], default='open', max_length=32)),
                ('assigned_to', models.CharField(blank=True, max_length=128)),
                ('resolution', models.JSONField(blank=True, default=dict)),
                ('interactions', models.JSONField(blank=True, default=list)),
                ('idempotency_key', models.CharField(blank=True, max_length=64)),
                ('request_id', models.CharField(blank=True, max_length=64)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='dorm_support_tickets', to='api.userprofile')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='DormServiceOrder',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('payload', models.JSONField(blank=True, default=dict)),
                ('status', models.CharField(choices=[('submitted', 'Submitted'), ('confirmed', 'Confirmed'), ('in_progress', 'In progress'), ('completed', 'Completed'), ('cancelled', 'Cancelled')], default='submitted', max_length=32)),
                ('scheduled_for', models.DateTimeField(blank=True, null=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('notifications', models.JSONField(blank=True, default=dict)),
                ('idempotency_key', models.CharField(blank=True, max_length=64)),
                ('request_id', models.CharField(blank=True, max_length=64)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('payment_intent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='service_orders', to='api.dormpaymentintent')),
                ('service', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='orders', to='api.dormservice')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='dorm_service_orders', to='api.userprofile')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddField(
            model_name='dormpaymentintent',
            name='user',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='dorm_payment_intents', to='api.userprofile'),
        ),
        migrations.CreateModel(
            name='DormGuestPass',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('guest_full_name', models.CharField(max_length=255)),
                ('guest_document', models.JSONField(default=dict)),
                ('visit_date', models.DateField()),
                ('visit_time_from', models.TimeField(blank=True, null=True)),
                ('visit_time_to', models.TimeField(blank=True, null=True)),
                ('notes', models.CharField(blank=True, max_length=255)),
                ('status', models.CharField(choices=[('active', 'Active'), ('used', 'Used'), ('cancelled', 'Cancelled'), ('expired', 'Expired')], default='active', max_length=32)),
                ('qr_code', models.JSONField(blank=True, default=dict)),
                ('security_meta', models.JSONField(blank=True, default=dict)),
                ('idempotency_key', models.CharField(blank=True, max_length=64)),
                ('request_id', models.CharField(blank=True, max_length=64)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='dorm_guest_passes', to='api.userprofile')),
            ],
            options={
                'ordering': ['-visit_date'],
            },
        ),
        migrations.CreateModel(
            name='DeaneryTransferRequest',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('desired_term', models.CharField(blank=True, max_length=32)),
                ('reason', models.TextField(blank=True)),
                ('documents', models.JSONField(blank=True, default=list)),
                ('status', models.CharField(choices=[('submitted', 'Submitted'), ('in_review', 'In review'), ('approved', 'Approved'), ('rejected', 'Rejected')], default='submitted', max_length=32)),
                ('workflow', models.JSONField(blank=True, default=dict)),
                ('notifications', models.JSONField(blank=True, default=dict)),
                ('idempotency_key', models.CharField(blank=True, max_length=64)),
                ('request_id', models.CharField(blank=True, max_length=64)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('from_program', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='transfer_requests_outgoing', to='api.program')),
                ('to_program', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='transfer_requests_incoming', to='api.program')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='transfer_requests', to='api.userprofile')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='DeaneryCompensationRequest',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('compensation_type', models.CharField(max_length=128)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=12)),
                ('currency', models.CharField(default='RUB', max_length=8)),
                ('reason', models.CharField(blank=True, max_length=255)),
                ('bank_details', models.JSONField(blank=True, default=dict)),
                ('documents', models.JSONField(blank=True, default=list)),
                ('status', models.CharField(choices=[('submitted', 'Submitted'), ('in_review', 'In review'), ('approved', 'Approved'), ('rejected', 'Rejected'), ('paid', 'Paid')], default='submitted', max_length=32)),
                ('workflow', models.JSONField(blank=True, default=dict)),
                ('notifications', models.JSONField(blank=True, default=dict)),
                ('idempotency_key', models.CharField(blank=True, max_length=64)),
                ('request_id', models.CharField(blank=True, max_length=64)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='compensation_requests', to='api.userprofile')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='DeaneryCertificateRequest',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('certificate_type', models.CharField(max_length=128)),
                ('language', models.CharField(blank=True, max_length=32)),
                ('purpose', models.CharField(blank=True, max_length=255)),
                ('copies_count', models.PositiveSmallIntegerField(default=1)),
                ('delivery_method', models.CharField(max_length=64)),
                ('pickup_location', models.CharField(blank=True, max_length=255)),
                ('digital_copy', models.BooleanField(default=False)),
                ('status', models.CharField(choices=[('submitted', 'Submitted'), ('in_progress', 'In progress'), ('ready', 'Ready'), ('issued', 'Issued'), ('cancelled', 'Cancelled')], default='submitted', max_length=32)),
                ('sla', models.JSONField(blank=True, default=dict)),
                ('processing', models.JSONField(blank=True, default=dict)),
                ('attachments', models.JSONField(blank=True, default=list)),
                ('notifications', models.JSONField(blank=True, default=dict)),
                ('idempotency_key', models.CharField(blank=True, max_length=64)),
                ('request_id', models.CharField(blank=True, max_length=64)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='certificate_requests', to='api.userprofile')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='CareerVacancyApplication',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('resume_url', models.URLField(blank=True)),
                ('cover_letter', models.TextField(blank=True)),
                ('portfolio_links', models.JSONField(blank=True, default=list)),
                ('answers', models.JSONField(blank=True, default=dict)),
                ('consents', models.JSONField(blank=True, default=dict)),
                ('status', models.CharField(choices=[('submitted', 'Submitted'), ('in_review', 'In review'), ('invited', 'Invited'), ('rejected', 'Rejected'), ('withdrawn', 'Withdrawn')], default='submitted', max_length=32)),
                ('status_history', models.JSONField(blank=True, default=list)),
                ('interviews', models.JSONField(blank=True, default=list)),
                ('notifications', models.JSONField(blank=True, default=dict)),
                ('idempotency_key', models.CharField(blank=True, max_length=64)),
                ('request_id', models.CharField(blank=True, max_length=64)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('vacancy', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='applications', to='api.careervacancy')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='career_applications', to='api.userprofile')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='CareerConsultation',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('topic', models.CharField(max_length=128)),
                ('subtopic', models.CharField(blank=True, max_length=128)),
                ('preferred_slots', models.JSONField(blank=True, default=list)),
                ('preferred_channel', models.CharField(blank=True, max_length=64)),
                ('scheduled_at', models.DateTimeField(blank=True, null=True)),
                ('duration_minutes', models.PositiveIntegerField(blank=True, null=True)),
                ('channel_details', models.JSONField(blank=True, default=dict)),
                ('status', models.CharField(choices=[('requested', 'Requested'), ('scheduled', 'Scheduled'), ('completed', 'Completed'), ('cancelled', 'Cancelled')], default='requested', max_length=32)),
                ('notes', models.JSONField(blank=True, default=dict)),
                ('feedback', models.JSONField(blank=True, default=dict)),
                ('idempotency_key', models.CharField(blank=True, max_length=64)),
                ('request_id', models.CharField(blank=True, max_length=64)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('counselor', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='career_consultations_as_counselor', to='api.userprofile')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='career_consultations', to='api.userprofile')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='AuditLogEntry',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('action', models.CharField(max_length=128)),
                ('resource', models.CharField(blank=True, max_length=255)),
                ('request_id', models.CharField(blank=True, max_length=64)),
                ('idempotency_key', models.CharField(blank=True, max_length=128)),
                ('scope', models.CharField(blank=True, max_length=128)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.CharField(blank=True, max_length=255)),
                ('performed_at', models.DateTimeField(auto_now_add=True)),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='audit_logs', to='api.userprofile')),
            ],
            options={
                'ordering': ['-performed_at'],
            },
        ),
        migrations.CreateModel(
            name='AdmissionsInquiry',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('full_name', models.CharField(max_length=128)),
                ('email', models.EmailField(max_length=254)),
                ('phone', models.CharField(blank=True, max_length=32)),
                ('question', models.TextField()),
                ('topic', models.CharField(choices=[('admission', 'Admission'), ('documents', 'Documents'), ('deadlines', 'Deadlines'), ('cost', 'Cost'), ('dorm', 'Dormitory'), ('other', 'Other')], default='other', max_length=32)),
                ('consents', models.JSONField(default=dict)),
                ('attachments', models.JSONField(blank=True, default=list)),
                ('meta', models.JSONField(blank=True, default=dict)),
                ('status', models.CharField(choices=[('received', 'Received'), ('processing', 'Processing'), ('answered', 'Answered'), ('closed', 'Closed')], default='received', max_length=32)),
                ('sla', models.JSONField(blank=True, default=dict)),
                ('channels', models.JSONField(blank=True, default=dict)),
                ('tracking', models.JSONField(blank=True, default=dict)),
                ('idempotency_key', models.CharField(blank=True, max_length=64)),
                ('request_id', models.CharField(blank=True, max_length=64)),
                ('program', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='admissions_inquiries', to='api.program')),
                ('university', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='admissions_inquiries', to='api.university')),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='admissions_inquiries', to='api.userprofile')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='AcademicLeaveRequest',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('reason', models.TextField()),
                ('leave_from', models.DateField()),
                ('leave_to', models.DateField()),
                ('documents', models.JSONField(blank=True, default=list)),
                ('advisor', models.CharField(blank=True, max_length=255)),
                ('status', models.CharField(choices=[('submitted', 'Submitted'), ('in_review', 'In review'), ('approved', 'Approved'), ('rejected', 'Rejected'), ('completed', 'Completed')], default='submitted', max_length=32)),
                ('workflow', models.JSONField(blank=True, default=dict)),
                ('notifications', models.JSONField(blank=True, default=dict)),
                ('idempotency_key', models.CharField(blank=True, max_length=64)),
                ('request_id', models.CharField(blank=True, max_length=64)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='academic_leave_requests', to='api.userprofile')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddIndex(
            model_name='careervacancy',
            index=models.Index(fields=['status'], name='api_careerv_status_43b33b_idx'),
        ),
        migrations.AddIndex(
            model_name='careervacancy',
            index=models.Index(fields=['posted_at'], name='api_careerv_posted__de9ce7_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='classroom',
            unique_together={('campus', 'name')},
        ),
        migrations.AlterUniqueTogether(
            name='programdeadline',
            unique_together={('program', 'phase', 'date')},
        ),
        migrations.AlterUniqueTogether(
            name='programrequirement',
            unique_together={('program', 'year')},
        ),
        migrations.AlterUniqueTogether(
            name='projecttask',
            unique_together={('project', 'external_id')},
        ),
        migrations.AlterUniqueTogether(
            name='projectvacancy',
            unique_together={('project', 'role_code')},
        ),
        migrations.AddIndex(
            model_name='lesson',
            index=models.Index(fields=['starts_at'], name='api_lesson_starts__9ee4f6_idx'),
        ),
        migrations.AddIndex(
            model_name='lesson',
            index=models.Index(fields=['ends_at'], name='api_lesson_ends_at_9837e9_idx'),
        ),
        migrations.AddIndex(
            model_name='lesson',
            index=models.Index(fields=['status'], name='api_lesson_status_692b19_idx'),
        ),
        migrations.AddIndex(
            model_name='lesson',
            index=models.Index(fields=['group'], name='api_lesson_group_i_f4593d_idx'),
        ),
        migrations.AddIndex(
            model_name='academiccourse',
            index=models.Index(fields=['kind'], name='api_academi_kind_2153e5_idx'),
        ),
        migrations.AddIndex(
            model_name='academiccourse',
            index=models.Index(fields=['term'], name='api_academi_term_accdb5_idx'),
        ),
        migrations.AddIndex(
            model_name='academiccourse',
            index=models.Index(fields=['format'], name='api_academi_format_91ff9e_idx'),
        ),
        migrations.AddIndex(
            model_name='program',
            index=models.Index(fields=['level'], name='api_program_level_13e7be_idx'),
        ),
        migrations.AddIndex(
            model_name='program',
            index=models.Index(fields=['format'], name='api_program_format_5a7a24_idx'),
        ),
        migrations.AddIndex(
            model_name='program',
            index=models.Index(fields=['has_budget'], name='api_program_has_bud_f8da75_idx'),
        ),
        migrations.AddIndex(
            model_name='program',
            index=models.Index(fields=['university', 'department'], name='api_program_univers_54e562_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='faculty',
            unique_together={('university', 'title')},
        ),
        migrations.AlterUniqueTogether(
            name='department',
            unique_together={('university', 'title')},
        ),
        migrations.AddIndex(
            model_name='tuitioninvoice',
            index=models.Index(fields=['status'], name='api_tuition_status_0531ee_idx'),
        ),
        migrations.AddIndex(
            model_name='teacherfeedback',
            index=models.Index(fields=['status'], name='api_teacher_status_d82090_idx'),
        ),
        migrations.AddIndex(
            model_name='teacherfeedback',
            index=models.Index(fields=['teacher'], name='api_teacher_teacher_ec177f_idx'),
        ),
        migrations.AddIndex(
            model_name='teacherfeedback',
            index=models.Index(fields=['course'], name='api_teacher_course__aca14c_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='teacherfeedback',
            unique_together={('user', 'teacher', 'course', 'period')},
        ),
        migrations.AlterUniqueTogether(
            name='projectteammembership',
            unique_together={('project', 'user', 'role_code')},
        ),
        migrations.AlterUniqueTogether(
            name='projectsubscription',
            unique_together={('project', 'user')},
        ),
        migrations.AddIndex(
            model_name='projectapplication',
            index=models.Index(fields=['status'], name='api_project_status_f98fea_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='projectapplication',
            unique_together={('project', 'user')},
        ),
        migrations.AddIndex(
            model_name='project',
            index=models.Index(fields=['status'], name='api_project_status_89cb34_idx'),
        ),
        migrations.AddIndex(
            model_name='project',
            index=models.Index(fields=['format'], name='api_project_format_767108_idx'),
        ),
        migrations.AddIndex(
            model_name='project',
            index=models.Index(fields=['owner_type'], name='api_project_owner_t_0a9b83_idx'),
        ),
        migrations.AddConstraint(
            model_name='opendayregistration',
            constraint=models.UniqueConstraint(fields=('event', 'email'), name='unique_event_email_registration'),
        ),
        migrations.AddIndex(
            model_name='libraryloan',
            index=models.Index(fields=['status'], name='api_library_status_2c15ec_idx'),
        ),
        migrations.AddIndex(
            model_name='libraryloan',
            index=models.Index(fields=['due_at'], name='api_library_due_at_b38d02_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='libraryhold',
            unique_together={('item', 'user', 'status')},
        ),
        migrations.AlterUniqueTogether(
            name='libraryebookaccess',
            unique_together={('item', 'user')},
        ),
        migrations.AlterUniqueTogether(
            name='eventregistration',
            unique_together={('event', 'user')},
        ),
        migrations.AddIndex(
            model_name='electiveenrollment',
            index=models.Index(fields=['term'], name='api_electiv_term_222fb4_idx'),
        ),
        migrations.AddIndex(
            model_name='electiveenrollment',
            index=models.Index(fields=['status'], name='api_electiv_status_16a5eb_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='electiveenrollment',
            unique_together={('user', 'course', 'term')},
        ),
        migrations.AddIndex(
            model_name='careervacancyapplication',
            index=models.Index(fields=['status'], name='api_careerv_status_c32e5e_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='careervacancyapplication',
            unique_together={('vacancy', 'user')},
        ),
        migrations.AddIndex(
            model_name='auditlogentry',
            index=models.Index(fields=['action'], name='api_auditlo_action_d0a658_idx'),
        ),
        migrations.AddIndex(
            model_name='auditlogentry',
            index=models.Index(fields=['request_id'], name='api_auditlo_request_d86805_idx'),
        ),
        migrations.AddIndex(
            model_name='admissionsinquiry',
            index=models.Index(fields=['status'], name='api_admissi_status_c26978_idx'),
        ),
        migrations.AddIndex(
            model_name='admissionsinquiry',
            index=models.Index(fields=['university'], name='api_admissi_univers_dd377c_idx'),
        ),
        migrations.AddIndex(
            model_name='admissionsinquiry',
            index=models.Index(fields=['program'], name='api_admissi_program_38f51e_idx'),
        ),
        migrations.AddIndex(
            model_name='admissionsinquiry',
            index=models.Index(fields=['topic'], name='api_admissi_topic_8cb02b_idx'),
        ),
    ]
